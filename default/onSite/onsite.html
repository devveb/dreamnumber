<!DOCTYPE html>

<html lang="en" >
	<!-- begin::Head -->
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151667624-2"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
	
		gtag('config', 'UA-151667624-2');
		</script>
		<meta charset="utf-8" />
		<title>
			Dream a LOTto
		</title>
		<meta name="description" content="Latest updates and statistic charts">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!--begin::Web font -->
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
		<script>
          WebFont.load({
            google: {"families":["Poppins:300,400,500,600,700","Roboto:300,400,500,600,700"]},
            active: function() {
                sessionStorage.fonts = true;
            }
          });
		</script>
		<!--end::Web font -->
        <!--begin::Base Styles -->  
        <!--begin::Page Vendors -->
		<link href="assets/vendors/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Page Vendors -->
		<link href="assets/vendors/base/vendors.bundle.css" rel="stylesheet" type="text/css" />
		<link href="assets/demo/default/base/style.bundle.css" rel="stylesheet" type="text/css" />
		<!--end::Base Styles -->
		<link rel="shortcut icon" href="assets/demo/default/media/img/logo/favicon.ico" />
	</head>
	<style>
	.m-list-timeline__items .m-list-timeline__item .m-list-timeline__time {
		display: table-cell;
		text-align: left;
		vertical-align: middle;
		width: 80px;
		padding: 0 7px 0 0;
		font-size: 0.85rem;
	}
	</style>
	<!-- end::Head -->
    <!-- end::Body -->
	<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-aside--offcanvas-default"  style="display: block;">
		<!-- begin:: Page -->
		<div class="m-grid m-grid--hor m-grid--root m-page">
			
				
		<!-- begin::Body -->
			<div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
				
				<div class="m-grid__item m-grid__item--fluid m-wrapper">
					<div class="m-content">
					<!--Begin::Section-->
						<div class="row">
							<div class="col-xl-3"></div>
							<div class="col-xl-6">
								<!--begin:: Widgets/Tasks -->
								<div class="m-portlet m-portlet--full-height ">
									<div class="m-portlet__head">
										<div class="m-portlet__head-caption">
											<div class="m-portlet__head-title">
												<h3 class="m-portlet__head-text">
													Dream a LOTto
												</h3>
											</div>
										</div>
										<div class="m-portlet__head-tools">
											<ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
												<li class="nav-item m-tabs__item">
													<a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_widget2_tab1_content" role="tab">
														DreamTeller
													</a>
												</li>
												<li class="nav-item m-tabs__item">
													<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_widget2_tab2_content1" role="tab" id="tab2">
														게시판
													</a>
												</li>
												<!-- <li class="nav-item m-tabs__item">
													<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_widget2_tab3_content1" role="tab">
														회원가입
													</a>
												</li> -->
											</ul>
										</div>
									</div>
									<div class="m-portlet__body">
										<div class="tab-content">
											<div class="tab-pane active" id="m_widget2_tab1_content">
												<div class="m-portlet__body">
													<div class="form-group m-form__group">
														<textarea class="form-control m-input" id="story" rows="3" placeholder="꿈내용을 입력해주세요 | Tell me your dream..."></textarea>
													</div>
													<div class="m-portlet__head" style="text-align: right; padding:0;">
														<div class="m-form__actions">
															<button type="reset" class="btn btn-primary" onclick="javscript:wtn();">
																해몽|DreamTeller
															</button>
														</div>
													</div>
													<div class="form-group m-form__group">
														<label>
															추천번호|Suggestion
														</label>
														<input type="text" class="form-control m-input m-input--solid" readonly="readonly" id="rsult">
													</div>
													<div class="m-portlet__head" style="padding:0">
														<div class="m-portlet__head-caption">
															<div class="m-portlet__head-title">
																<h3 class="m-portlet__head-text">
																	최근|Recent
																	<small>
																		<a href="javascript:clickTab2();">더보기|more</a>
																	</small>
																</h3>
															</div>
														</div>
													</div>
													<div class="m-demo__preview">
														<div class="m-list-timeline">
															<div class="m-list-timeline__items">
																	
															</div>
														</div>
													</div>

													
												</div>
											</div>
											<div class="tab-pane" id="m_widget2_tab2_content1">
												<div class="m-portlet">
													<div class="m-portlet__body">
														<div class="m-scrollable mCustomScrollbar _mCS_2 mCS-autoHide" data-scrollable="true" data-max-height="500" style="max-height: 500px; height: 450px; position: relative; overflow: visible;"><div id="mCSB_2" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical mCSB_outside" tabindex="0" style="max-height: none;"><div id="mCSB_2_container" class="mCSB_container" style="position: relative; top: 0px; left: 0px;" dir="ltr">
															<div class="tab-pane active" id="m_widget2_tab1_content">
												<!--Begin::Timeline 3 -->
												<div class="m-timeline-3">
													<div class="m-timeline-3__items">
														
													</div>
													<div class="row">
														<div class="col m--align-center">
															<button type="button" class="btn btn-sm m-btn--custom m-btn--pill  btn-danger" onclick="javascript:readmore()">
																더보기
															</button>
														</div>
													</div>
												</div>
												<!--End::Timeline 3 -->
											</div>
														</div></div><div id="mCSB_2_scrollbar_vertical" class="mCSB_scrollTools mCSB_2_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_2_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; display: block; height: 52px; max-height: 180px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div></div>
													</div>
												</div>
											</div>
											<div class="tab-pane" id="m_widget2_tab3_content1"></div>
										</div>
									</div>
								</div>
								<!--end:: Widgets/Tasks -->
							</div>
							<div class="col-xl-3"></div>
							
						</div>
					</div>	
					</div>
				</div>
			</div>
			<!-- end:: Body -->
			<!-- begin::Footer -->
			<footer class="m-grid__item		m-footer ">
				<div class="m-container m-container--fluid m-container--full-height m-page__container">
					<div class="m-stack m-stack--flex-tablet-and-mobile m-stack--ver m-stack--desktop">
						<div class="m-stack__item m-stack__item--left m-stack__item--middle m-stack__item--last">
							<span class="m-footer__copyright">
								2020 &copy; by
								<a href="https://sooreesan.github.io" class="m-link">
									tae
								</a>
							</span>
						</div>
						<div class="m-stack__item m-stack__item--right m-stack__item--middle m-stack__item--first">
							<ul class="m-footer__nav m-nav m-nav--inline m--pull-right">
								<li class="m-nav__item">
									<a href="#" class="m-nav__link">
										<span class="m-nav__link-text">
											About
										</span>
									</a>
								</li>
								<li class="m-nav__item">
									<a href="#"  class="m-nav__link">
										<span class="m-nav__link-text">
											Privacy
										</span>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</footer>
			<!-- end::Footer -->
		</div>
		<!-- end:: Page -->
    		        		    
	    
		
			
    	<!--begin::Base Scripts -->
		<script src="assets/vendors/base/vendors.bundle.js" type="text/javascript"></script>
		<script src="assets/demo/default/base/scripts.bundle.js" type="text/javascript"></script>
		<!--end::Base Scripts -->   
        <!--begin::Page Vendors -->
		<script src="assets/vendors/custom/fullcalendar/fullcalendar.bundle.js" type="text/javascript"></script>
		<!--end::Page Vendors -->  
        <!--begin::Page Snippets -->
		<script src="assets/app/js/dashboard.js" type="text/javascript"></script>
		<!--end::Page Snippets -->
		<script>

			var page = 0;	
			

			$(function() {

				recent();
				list(page);
				setInterval(recent,30000);

			});	

			function readmore(){
				page=page+5;
				console.log("present: "+page);
				list(page);
				
			}

			function clickTab2(){
				console.log("click tab2");
				$("#tab2").click();
			}

			function wtn() {
				if($("#story").val() =='' || $("#story").val().length <= 5){
					alert("Tell me more ...");
					return false;
				}

				if($("#story").val() =='' || $("#story").val().length >= 256){
					alert("너무 장황합니다. 줄여주세요");
					return false;
				}	

				alert("good luck!");
				$.post("http://devveb.hopto.org:28081/api/lotto/wtn", {story: $("#story").val(), iss: 1}, function (result) {
					$("#rsult").val(result);
				});

				recent();
				$("#story").val('');
            
    }
		
			function recent() {
				

				$.post("http://devveb.hopto.org:28081/api/lotto/rl", {p:0}, function (result) {
					
					var historyHtml='';

					$.each(result,function(i,v){
						
						historyHtml=historyHtml+'<div class="m-list-timeline__item">'+
												'<span class="m-list-timeline__badge"></span>'+
												'<span class="m-list-timeline__time">'+
												v.timer+
												'</span>'+
												'<span class="m-list-timeline__text">'+
												v.story+
												'</span>'+
												'</div>'
					})
					//console.log(historyHtml);
					$(".m-list-timeline__items").empty().html(historyHtml);

					
					
				});
    		}


			function list(page) {
            
			$.post("http://devveb.hopto.org:28081/api/lotto/rl", {p:page}, function (result) {
				
				var historyHtml='';

				$.each(result,function(i,v){
					
					historyHtml=historyHtml+'<div class="m-timeline-3__item m-timeline-3__item--info">'
						+'<span class="m-timeline-3__item-time">'
							+v.timer
							+'								</span>'
							+'								<div class="m-timeline-3__item-desc">'
								+'									<span class="m-timeline-3__item-text">'
									+v.story
									+'							</span>'
									+'							<br>'
									+'							<span class="m-timeline-3__item-user-name">'
										
											+v.result
										
											+'					</span>'
											+'				</div>'
											+'			</div>'
				})
				//console.log(historyHtml);
				$(".m-timeline-3__items").html(historyHtml);

				
				
			});
		}
		</script>
	</body>
	<!-- end::Body -->
</html>
